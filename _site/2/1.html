<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>STEP2-1.JavaScriptを書いてみる / チームラボ オンラインスキルアップ課題</title>
    <link rel="stylesheet" href="../stylesheets/styles.css">
    <link rel="stylesheet" href="../stylesheets/pygment_trac.css">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>
          <img src="../images/logo.jpg" align="middle">
          チームラボ オンラインスキルアップ課題
        </h1>
      </header>
      <section>
        <div id="side_menu">
          <h2>目次</h2>
          <ul>
            <li><a href="../index.html">はじめに</a>
          </ul>
          
          <h3>STEP1 掲示板を作ろう</h3>
          <ul>
            <li><a href="../1/1.html">1.インターネットのしくみ</a>
            <li><a href="../1/2.html">2.HTTPのしくみ</a>
            <li><a href="../1/3.html">3.Webサーバを立ててみる</a>
            <li><a href="../1/4.html">4.HTML,CSSを書いてみる</a>
            <li><a href="../1/5.html">5.PHPを書いてみる</a>
            <li><a href="../1/6.html">6.PHPでGET,POSTを受け取る</a>
            <li><a href="../1/7.html">7.データベースを作成してみる</a>
            <li><a href="../1/8.html">8.SQLを書いてみる</a>
            <li><a href="../1/9.html">9.PHPからデータベースを操作してみる</a>
            <li><a href="../1/10.html">最終課題</a>
          </ul>
          
          <h3>STEP2 Twitterもどきを作ろう</h3>
          <ul>
            <li><a href="../2/1.html">1.JavaScriptを書いてみる</a>
            <li><a href="../2/2.html">2.ログイン機能を作ってみる</a>
            <li><a href="../2/3.html">3.入力チェックを作ってみる</a>
            <li><a href="../2/4.html">4.ログイン機能をクラス化してみる</a>
            <li><a href="../2/5.html">5.フレームワークとは</a>
            <li><a href="../2/6.html">6.CakePHPの基本</a>
            <li><a href="../2/7.html">7.CakePHPでログイン機能を書いてみる</a>
            <li><a href="../2/8.html">8.画面仕様書とは</a>
            <li><a href="../2/9.html">9.データベースを設計してみる</a>
            <li><a href="../2/10.html">最終課題</a>
          </ul>
          
          <h3>STEP3 オリジナルサイトを作ろう</h3>
          <ul>
            <li><a href="../3/1.html">1.Ajaxを使ってみる</a>
            <li><a href="../3/2.html">2.画面仕様書,スケジュールを作ってみる</a>
            <li><a href="../3/3.html">3.テストとは</a>
            <li><a href="../3/4.html">4.単体テストを書いてみる</a>
            <li><a href="../3/5.html">5.IDEを使ってみる</a>
            <li><a href="../3/6.html">6.バージョン管理をしてみる</a>
            <li><a href="../3/7.html">7.サイトを公開してみる</a>
            <li><a href="../3/8.html">8.セキュリティ対策をしてみる</a>
            <li><a href="../3/9.html">最終課題</a>
          </ul>
        </div>
        <div id="contents">
          <h1>STEP2-1.JavaScriptを書いてみる</h1>

<p>JavaScriptはブラウザ上で実行されるスクリプト言語で、ページの書き換えやアニメーションなどを含む動的なWebサイトを作成することができます。PHPとの最も大きな違いは実行される場所です。PHPはサーバ上で実行されるため、サーバ上のデータ（データベースなど）の操作などを行うのに適しています。一方JavaScriptはブラウザ上で実行されるため、リアルタイムにダイナミックな動きを実現できます。</p>

<h2>基本構文</h2>

<p>以下はJavaScriptの基本的な構文とコード例です。HTMLに組み込んで使用する前に、コンソールから使用してみましょう。GoogleChromeで右クリック→「要素を検証」→「Console」タブを選択します。ここにJavaScriptのコードを記述していきます。</p>

<h3>if文</h3>
<div class="highlight"><pre><code class="js language-js" data-lang="js"><span class="nx">a</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="k">if</span><span class="p">(</span><span class="nx">a</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span> <span class="o">+</span> <span class="s2">&quot; is 3&quot;</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span> <span class="o">+</span> <span class="s2">&quot; is not 3&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>出力：</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">5 is not 3
</code></pre></div>
<ul>
<li>console.logはコンソールに出力する関数です。</li>
</ul>

<h3>for文</h3>
<div class="highlight"><pre><code class="js language-js" data-lang="js"><span class="c1">//iが0から10未満の間、1ずつ加算しながら繰り返し</span>
<span class="k">for</span><span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>出力：</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">0
1
2
3
4
5
6
7
8
9 
</code></pre></div>
<h3>関数</h3>
<div class="highlight"><pre><code class="js language-js" data-lang="js"><span class="c1">//引数の文字列を2回表示する関数</span>
<span class="kd">function</span> <span class="nx">double_alert</span><span class="p">(</span><span class="nx">text</span><span class="p">){</span>
  <span class="nx">alert</span><span class="p">(</span><span class="nx">text</span> <span class="o">+</span> <span class="nx">text</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">double_alert</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">);</span>
</code></pre></div>
<ul>
<li>alertは画面にアラートを表示する関数です。</li>
</ul>

<p>また、JavaScriptにおいて関数はFunctionオブジェクトであり、以下のように書くこともできます。</p>
<div class="highlight"><pre><code class="js language-js" data-lang="js"><span class="c1">//関数を作成してdouble_alertに代入</span>
<span class="nx">double_alert</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">){</span>
  <span class="nx">alert</span><span class="p">(</span><span class="nx">text</span> <span class="o">+</span> <span class="nx">text</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">double_alert</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">);</span>
</code></pre></div>
<p>このとき元の関数は名前を付けずに定義しています。これを無名関数といいます。無名関数は、関数を引数にとる関数を使用するときに威力を発揮します。もう少し後で説明します。</p>

<h3>DOM</h3>

<p>DOMとはHTMLの要素へアクセスするしくみです。JavaScriptからもDOMを利用してHTMLを操作できます。例として以下にid=dom_testの要素を設置しました。この要素のテキストを書き換えてみましょう。</p>

<div id="dom_test">ここがid=dom_testの要素です。</div>
<div class="highlight"><pre><code class="js language-js" data-lang="js"><span class="c1">//IDがdom_testである要素を取得する</span>
<span class="nx">dom_test</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;dom_test&quot;</span><span class="p">);</span>
<span class="c1">//内部テキストを書き換える</span>
<span class="nx">dom_test</span><span class="p">.</span><span class="nx">innerText</span> <span class="o">=</span> <span class="s2">&quot;書き換えました。&quot;</span><span class="p">;</span>
</code></pre></div>
<p>「ここがid=dom_testの要素です。」と書いてあった部分が「書き換えました。」に変わると思います。</p>

<h2>jQuery</h2>

<p>いよいよHTMLにJavaScriptを組み込むのですが、JavaScriptもブラウザによってかなり動作の違いがあります。そこでブラウザ間の違いを吸収してくれるライブラリを利用することにします。jQueryというライブラリが最も有名です。</p>

<p>まずは以下のHTMLを適当な名前で保存します。scriptタグによってまずjQueryを読み込み、次に自分で書くJavaScriptのファイルを読み込んでいます。</p>
<div class="highlight"><pre><code class="html language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">&quot;UTF-8&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;title&gt;</span>JavaScriptのサンプル<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;http://code.jquery.com/jquery-2.0.0.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;test_script.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;p</span> <span class="na">id=</span><span class="s">&quot;message&quot;</span><span class="nt">&gt;</span>こんにちは<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;button&gt;</span>おす<span class="nt">&lt;/button&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div>
<p>次に以下の内容をtest_script.jsという名前で保存します。</p>
<div class="highlight"><pre><code class="js language-js" data-lang="js"><span class="c1">//読み込み完了時に実行する関数を指定</span>
<span class="nx">$</span><span class="p">(</span><span class="nx">loaded</span><span class="p">);</span>

<span class="kd">function</span> <span class="nx">loaded</span><span class="p">(){</span>
  <span class="c1">//ボタンタグをクリックしたときの動作を指定</span>
  <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;button&quot;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">change_text</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">change_text</span><span class="p">(){</span>
  <span class="c1">//IDがmessageの要素のテキストを書き換え</span>
  <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#message&quot;</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;こんばんは&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>実際にブラウザで見てみましょう。ボタンを押すと「こんにちは」が「こんばんは」に書き換わるはずです。</p>

<p>jQueryでは$関数を頻繁に使用します。$関数に関数を渡すとページの読み込みが終わったときにその関数が実行されます。また、$関数に文字列を渡すと該当のDOM要素を返します。これをセレクタといいます。セレクタの詳しい使い方については<a href="http://semooh.jp/jquery/">jQuery日本語リファレンス</a>を参照してください。</p>

<p>上記の例で作成した関数は引数として利用するためだけに作成されています。そこで、先ほど説明した無名関数の機能を使うと以下のように簡潔に書くことができます。</p>
<div class="highlight"><pre><code class="js language-js" data-lang="js"><span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
  <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;button&quot;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#message&quot;</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;こんばんは&quot;</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
        </div>
      </section>
    </div>
  </body>
</html>